import{i as H,j as q,k as K,l as O,m as J,n as Q}from"../modules/unplugin-icons-BnRfKHjN.js";import{ag as U,z as y,d as j,o as n,c,B as e,i as D,p as T,E as M,O as X,K as Y,N as Z,ah as ee,a5 as te,e as k,f as t,b as o,w as h,n as B,g as se,t as oe,F as ne}from"../modules/vue-D5pbhIO4.js";import{a as re,u as ae,s as ie,c as le,d as ce,h as ue,j as me,k as de,l as pe,m as _e,n as fe,_ as ve}from"../index-DAVlqTHP.js";import{b as xe,c as ge,a as E,S as ke}from"./SlideWrapper-CJQaUGBv.js";import{r as he,u as ye,a as be,S as Ce,o as Se,_ as we,G as $e,b as ze,c as Ne}from"./shortcuts-GCjBJ7Cq.js";import{_ as Fe,C as Te}from"./NoteDisplay.vue_vue_type_style_index_0_lang-C7RqUgrE.js";import{_ as Me}from"./DrawingControls.vue_vue_type_style_index_0_lang-3uyQaf03.js";import{_ as P}from"./IconButton.vue_vue_type_script_setup_true_lang-ClXi9MMx.js";import"../modules/shiki-Dhyd4oQV.js";import"./title-renderer.md_vue_type_script_setup_true_lang-Rx9yNl4m.js";import"./context-Bv--8oq-.js";function Be(){const{counter:v,isActive:r,reset:a,pause:u,resume:d}=U(1e3,{controls:!0});return{timer:y(()=>{const m=v.value,b=Math.floor(m%60).toString().padStart(2,"0");return`${Math.floor(m/60).toString().padStart(2,"0")}:${b}`}),isTimerAvctive:r,resetTimer:a,toggleTimer:()=>r.value?u():d()}}const Ee=j({__name:"NoteStatic",props:{no:{},class:{},clicksContext:{}},setup(v){const r=v,{info:a}=xe(r.no);return(u,d)=>{var p,m;return n(),c(Fe,{class:D(r.class),note:(p=e(a))==null?void 0:p.note,"note-html":(m=e(a))==null?void 0:m.noteHTML,"clicks-context":u.clicksContext},null,8,["class","note","note-html","clicks-context"])}}}),Pe={class:"bg-main h-full slidev-presenter"},je={class:"relative grid-section next flex flex-col p-2 lg:p-4"},De={key:1,class:"h-full flex justify-center items-center"},Ie={key:0,class:"grid-section note of-auto"},Re={key:1,class:"grid-section note grid grid-rows-[1fr_min-content] overflow-hidden"},Ae={class:"border-t border-main py-1 px-2 text-sm"},Le={class:"grid-section bottom flex"},Ve={class:"group flex items-center justify-center pl-4 select-none"},We={class:"w-22px cursor-pointer"},Ge={class:"group-not-hover:hidden flex flex-col items-center"},He={class:"text-2xl px-3 my-auto tabular-nums"},qe={class:"progress-bar"},Ke=j({__name:"presenter",setup(v){const r=T();he(),ye(r),be();const{clicksContext:a,currentSlideNo:u,currentSlideRoute:d,hasNext:p,nextRoute:m,slides:b,getPrimaryClicks:w,total:I}=re(),{isDrawing:R}=ge();ae({title:`Presenter - ${ie}`}),T(!1);const{timer:A,isTimerAvctive:L,resetTimer:$,toggleTimer:z}=Be(),V=y(()=>b.value.map(g=>le(g))),i=y(()=>a.value.current<a.value.total?[d.value,a.value.current+1]:p.value?[m.value,0]:null),x=y(()=>i.value&&V.value[i.value[0].no-1]);M(i,()=>{x.value&&i.value&&(x.value.current=i.value[1])},{immediate:!0});const N=X();return Y(()=>{const g=r.value.querySelector("#slide-content"),s=Z(ee()),C=te();M(()=>{if(!C.value||R.value||!ue.value)return;const l=g.getBoundingClientRect(),_=(s.x-l.left)/l.width*100,f=(s.y-l.top)/l.height*100;if(!(_<0||_>100||f<0||f>100))return{x:_,y:f}},l=>{ce.cursor=l})}),(g,s)=>{var F;const C=H,l=q,_=K,f=O,W=J,G=Q;return n(),k(ne,null,[t("div",Pe,[t("div",{class:D(["grid-container",`layout${e(me)}`])},[t("div",{ref_key:"main",ref:r,class:"relative grid-section main flex flex-col"},[o(E,{key:"main",class:"p-2 lg:p-4 flex-auto","is-main":"",onContextmenu:e(Se)},{default:h(()=>[o(Ce,{"render-context":"presenter"})]),_:1},8,["onContextmenu"]),(n(),c(Te,{key:(F=e(d))==null?void 0:F.no,"clicks-context":e(w)(e(d)),class:"w-full pb2 px4 flex-none"},null,8,["clicks-context"])),s[4]||(s[4]=t("div",{class:"absolute left-0 top-0 bg-main border-b border-r border-main px2 py1 op50 text-sm"}," Current ",-1))],512),t("div",je,[i.value&&x.value?(n(),c(E,{key:"next"},{default:h(()=>[(n(),c(ke,{key:i.value[0].no,"clicks-context":x.value,route:i.value[0],"render-context":"previewNext"},null,8,["clicks-context","route"]))]),_:1})):(n(),k("div",De,s[5]||(s[5]=[t("div",{class:"text-gray-500"}," End of the presentation ",-1)]))),s[6]||(s[6]=t("div",{class:"absolute left-0 top-0 bg-main border-b border-r border-main px2 py1 op50 text-sm"}," Next ",-1))]),N.value&&e(de)?(n(),k("div",Ie,[o(e(N))])):(n(),k("div",Re,[(n(),c(Ee,{key:`static-${e(u)}`,no:e(u),class:"w-full max-w-full h-full overflow-auto p-2 lg:p-4",style:B({fontSize:`${e(pe)}em`}),"clicks-context":e(a)},null,8,["no","style","clicks-context"])),t("div",Ae,[o(P,{title:"Increase font size",onClick:e(_e)},{default:h(()=>[o(C)]),_:1},8,["onClick"]),o(P,{title:"Decrease font size",onClick:e(fe)},{default:h(()=>[o(l)]),_:1},8,["onClick"]),se("",!0)])])),t("div",Le,[o(we,{persist:!0}),s[7]||(s[7]=t("div",{"flex-auto":""},null,-1)),t("div",Ve,[t("div",We,[o(_,{class:"group-hover:hidden text-xl"}),t("div",Ge,[t("div",{class:"relative op-80 hover:op-100",onClick:s[2]||(s[2]=(...S)=>e(z)&&e(z)(...S))},[e(L)?(n(),c(f,{key:0,class:"text-lg"})):(n(),c(W,{key:1}))]),t("div",{class:"op-80 hover:op-100",onClick:s[3]||(s[3]=(...S)=>e($)&&e($)(...S))},[o(G)])])]),t("div",He,oe(e(A)),1)])]),(n(),c(Me,{key:2}))],2),t("div",qe,[t("div",{class:"progress h-3px bg-primary transition-all",style:B({width:`${(e(u)-1)/(e(I)-1)*100+1}%`})},null,4)])]),o($e),o(ze),o(Ne)],64)}}}),nt=ve(Ke,[["__scopeId","data-v-6efbf129"]]);export{nt as default};
